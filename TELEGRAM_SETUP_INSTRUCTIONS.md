# Настройка Telegram бота для рассылок

## Создание бота

1. Найдите в Telegram бота @BotFather
2. Отправьте команду `/newbot`
3. Введите имя для вашего бота (например: "Фитнес клуб бот")
4. Введите username для бота (должен заканчиваться на "bot", например: "fitness_club_notifications_bot")
5. Скопируйте токен, который выдаст BotFather

## Настройка переменных окружения

Добавьте в файл `.env.local` (или `.env`) следующую переменную:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

Замените `your_bot_token_here` на токен, полученный от BotFather.

## Получение Telegram ID клиентов

Есть несколько способов получить Telegram ID клиентов:

### Способ 1: Через специального бота для получения ID

1. Создайте отдельного бота для получения ID клиентов
2. Попросите клиентов написать этому боту команду `/start`
3. Бот может ответить их Telegram ID

### Способ 2: Через веб-приложение

1. Создайте мини-приложение в Telegram
2. Используйте Telegram Web Apps API для получения ID пользователя
3. Сохраните ID в базе данных

### Способ 3: Ручной ввод

1. Попросите клиентов найти бота @userinfobot
2. Этот бот покажет их Telegram ID
3. Клиенты могут сообщить свой ID администратору

## Настройка разрешений бота

В BotFather выполните следующие команды:

1. `/setprivacy` - выберите ваш бот - выберите "Disable" (чтобы бот мог читать все сообщения в группах)
2. `/setjoingroups` - выберите ваш бот - выберите "Enable" (если планируете добавлять бота в группы)
3. `/setcommands` - настройте команды для бота

## Тестирование

1. Найдите вашего бота в Telegram по username
2. Отправьте команду `/start`
3. Проверьте, что бот отвечает

## Примеры команд для настройки бота

### Установка команд бота
```
/setcommands

start - Начать работу с ботом
help - Получить справку
stop - Отписаться от уведомлений
```

### Установка описания бота
```
/setdescription

Бот для получения уведомлений от фитнес-клуба. 
Здесь вы будете получать новости, акции и напоминания о тренировках.
```

### Установка короткого описания
```
/setabouttext

Уведомления от фитнес-клуба
```

## Безопасность

1. **Не делитесь токеном бота** - он дает полный доступ к боту
2. **Используйте переменные окружения** - не вставляйте токен прямо в код
3. **Регулярно проверяйте логи** - следите за активностью бота
4. **Ограничьте права бота** - давайте только необходимые разрешения

## Ограничения Telegram API

1. **Rate Limits**: 
   - Максимум 30 сообщений в секунду
   - В групповых чатах - 20 сообщений в минуту
   - Наш код автоматически учитывает эти ограничения

2. **Размер сообщений**:
   - Текст: до 4096 символов
   - Подпись к фото: до 1024 символов

3. **Размер файлов**:
   - Фото: до 10 МБ
   - Документы: до 50 МБ

## Мониторинг

Для отслеживания работы бота рекомендуется:

1. Настроить логирование ошибок
2. Использовать webhook для получения обновлений (опционально)
3. Регулярно проверять статистику отправки сообщений

## Поддержка

Если у вас возникли проблемы:

1. Проверьте правильность токена
2. Убедитесь, что бот не заблокирован
3. Проверьте логи приложения на ошибки
4. Обратитесь к документации Telegram Bot API: https://core.telegram.org/bots/api

## Альтернативные решения

Если Telegram не подходит, можно рассмотреть:

1. **SMS-рассылки** через провайдеров (Смс.ру, Twilio)
2. **Email-рассылки** через SMTP или сервисы типа SendGrid
3. **Push-уведомления** через мобильное приложение
4. **WhatsApp Business API** для рассылок в WhatsApp
